<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Empatica iOS API for Developers</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Empatica API Tutorial (0.7.2)</h1>
        </header>

<!--         <section id="downloads" class="clearfix">
          <a href="https://github.com/empatica" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section> -->

        <hr>

        <section id="main_content">
          <h1>
<a id="empatica-ios-api" class="anchor" href="#empatica-ios-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Empatica iOS API for Developers</h1>

<p>The steps described below assume you are adding the Empatica API to an existing project, or a new one you created from scratch.</p>

<p>You can also download an example Xcode project, already configured for use with the Empatica API, and start using your Empatica E4 in a matter of minutes. You are just required to use your Empatica API key in the AppDelegate.m source file and remember to delete the line starting with "#error"</p>

<h2>
<a id="step1-setup" class="anchor" href="#step1-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Setup</h2>

<h3>
<a id="add-empalink-api" class="anchor" href="#add-empalink-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add Empalink API</h3>

<ol>
<li><p>Download the EmpaLink Framework for iOS from your Developer Area in Empatica Connect</p></li>
<li><p>Open your existing project</p></li>
<li><p>Drag the EmpaLink Framework into your project's "Frameworks" folder.</p></li>
</ol>

<p>IMAGE</p>

<p><b>**Note:**</b> Make sure the "Copy items into destination group's folder (if needed)" checkbox is checked.
</p>

<p>IMAGE</p>

<h3>
<a id="add-background-comm-support" class="anchor" href="#add-background-comm-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add background communication support</h3>

<p>EmpaLink can communicates with the Empatica device even while the app is in the background. Your app requires the authorization to run CoreBluetooth service in the background to work.</p>

<p>In order to enable background communications for app running in the background, we need to check the right "Background Modes" option in the iOS Target Properties.</p>

<ol>
<li><p>In the Project Target, select "Capabilities" tab.</p></li>
<li><p>Enable "Background Modes" by clicking on the switch.</p></li>
<li><p>Check "Uses Bluetooth LE accessories.</p></li>
</ol>

<p>IMAGE</p>

<h2>
<a id="step2-initialize-api" class="anchor" href="#step2-initialize-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Initialize the API</h2>

<p>The final steps to set up the API require adding a few lines of code to your main app delegate. This is the class where you include iOS required methods like <code>applicationDidFinishLaunching</code>.</p>

<h3>
<a id="import-empatica-api" class="anchor" href="#import-empatica-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import the Empatica API header</h3>

<p>At the top of your app delegate source file (and anywhere you invoke the DeviceManager class), you’ll need to include the correct EmpaLink header.</p>

<p>If you downloaded the full version, simply add this line:</p>

<p><code> // AppDelegate.h</code></p>
<p><code>#import <EmpaLink-ios-0.7-full/>EmpaticaAPI-0.7.h></code></p>

<p>Otherwise, add the following line:</p>

<p><code> // AppDelegate.h</code></p>
<p><code>#import <EmpaLink-ios-0.7-full/>EmpaticaAPI-0.7.h></code></p>

<h3>
<a id="set-empatica-api-key" class="anchor" href="#set-empatica-api-key" aria-hidden="true"><span class="octicon octicon-link"></span></a>Set Your Empatica API Key</h3>

<p>The EmpaLink API requires your developer key in order to make any requests to the API. Call this method with your API key when launching your app, adding the following code to your app delegate source file (usually AppDelegate.m):</p>

<p><code>// AppDelegate.h</code></p>
<p><code>- (BOOL)application:(UIApplication *)application </code></p>
<p><code>didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {</code></p>
<p><code>[EmpaticaAPI authenticateWithAPIKey:@"HERE_GOES_YOUR_API_KEY"</code></p>
<p><code>andCompletionHandler:^(BOOL success, NSString *description)</code></p>
<p><code>{</code></p>
<p><code>NSLog(@"Empatica API authentication successful: %d", success);</code></p>
<p><code>}];</code></p>
<p><code>return YES;</code></p>
<p><code>}</code></p>

<p>In your app delegate source file, you also need to implement the following methods:</p>

<p><code>// AppDelegate.h</code></p>










        <footer>
          <p>Having trouble with Empatica developer`s software? <a href="support@empatica.com">Contact support</a> and we’ll help you sort it out.</p>
        </footer> -->
        
      </div>
    </div>
  </body>
</html>